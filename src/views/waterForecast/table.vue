<template>
  <div class="table-wrapper">
    <div class="excel-down-btn">
      <p class="table-time">起报时间： 2020-10-25 12:00</p>
      <el-button type="primary" icon="el-icon-download" plain size="mini">下载</el-button>
    </div>
    <el-table
      v-loading="loading"
      :data="tableData"
      class="mr-b-10"
      style="width: 100%"
      :height="tableHeight - 40"
      border
    >
      <el-table-column show-overflow-tooltip prop="sectionName" label="站点名称" align="center">
      </el-table-column>
      <el-table-column width="78" prop="countyName" label="行政区" align="center">
      </el-table-column>
      <el-table-column prop="rlName" label="所属河流" show-overflow-tooltip align="center">
      </el-table-column>
      <el-table-column width="128" prop="dataTimeJoin" label="时间" align="center">
      </el-table-column>
      <el-table-column width="78" prop="waterGrade" label="水质类别" align="center">
      </el-table-column>
      <el-table-column width="78" prop="exceedFlag" label="达标情况" align="center" />
      <el-table-column width="122" prop="exceedDetail" label="主要污染指标" align="center" />
      <el-table-column width="109" prop="pindex" label="高猛酸盐指数(mg/L)" align="center" />
      <el-table-column width="104" prop="cod" label="总氮(mg/L)" align="center" />
      <el-table-column width="98" prop="anitrogen" label="氨氮(mg/L)" align="center" />
      <el-table-column width="98" prop="tp" label="总磷(mg/L)" align="center" />
      <el-table-column width="114" prop="cod" label="溶解氧(mg/L)" align="center" />

    </el-table>
    <pagination :page="page" @updateTable="updateTable" />
  </div>
</template>

<script>
import pagination from "@/components/Pagenation";
import { initTableData } from "@/api/dataTable";
export default {
  components: {
    pagination
  },
  data() {
    return {
      url: "/industrial/getIndustrialList",
      tableHeight: 0,
      loading: false,
      downloadLoading: false,
      page: {
        pageNum: 1,
        pageSize: 10,
        total: 150
      },
      tableData: [
        {
          "sectionName": "永安洪田",
          "countyName": "三明市",
          "rlName": "文川溪",
          "sectionAttr": "国控",
          "dataTimeJoin": "2018-01-2019-01",
          "waterGrade": 'V',
          "exceedFlag": "超标",
          "exceedDetail": "总氮(0.55)",
          "waterTemp": 22.175,
          "ph": 7.0075,
          "doxygen": 6.34,
          "pindex": 2.116,
          "cod": 10.79166,
          "bod5": 0.9194,
          "anitrogen": 0.425,
          "tp": 0.05361083,
          "tn": 1.6686,
          "zn": 0.02083,
          "fluoride": 0.3027775,
          "se": 2.0,
          "arsenic": 2.16,
          "hg": 1.875,
          "cd": 5.0,
          "hc": 0.002,
          "cu": 0.02,
          "pb": 9.199,
          "cyanide": 0.002,
          "vp": 1.9166,
          "petroleum": 0.016805,
          "anis": 0.0208,
          "sulfide": 0.002,
          "fc": -1.0,
          "id": 26,
          "sectionCode": "350400_2006",
          "waterStage": -1.0,
          "waterFlow": 145.8,
          "conductivity": 15.9333,
          "pellucidity": -1.0,
          "ca": -1.0,
          "cu": 0.00117,
          "salinity": -1.0,
          "nitrate": -1.0,
          "nitrite": -1.0,
          "sulphate": -1.0,
          "chloride": -1.0,
          "fe": -1.0,
          "mn": -1.0,
          "silicate": -1.0,
          "exceedStandard": ""
        },
        {
          "sectionName": "永安洪田",
          "countyName": "三明市",
          "rlName": "文川溪",
          "sectionAttr": "国控",
          "dataTimeJoin": "2018-01-2019-01",
          "waterGrade": 'V',
          "exceedFlag": "超标",
          "exceedDetail": "总氮(0.55)",
          "waterTemp": 22.175,
          "ph": 7.0075,
          "doxygen": 6.34,
          "pindex": 2.116,
          "cod": 10.79166,
          "bod5": 0.9194,
          "anitrogen": 0.425,
          "tp": 0.05361083,
          "tn": 1.6686,
          "zn": 0.02083,
          "fluoride": 0.3027775,
          "se": 2.0,
          "arsenic": 2.16,
          "hg": 1.875,
          "cd": 5.0,
          "hc": 0.002,
          "cu": 0.02,
          "pb": 9.199,
          "cyanide": 0.002,
          "vp": 1.9166,
          "petroleum": 0.016805,
          "anis": 0.0208,
          "sulfide": 0.002,
          "fc": -1.0,
          "id": 26,
          "sectionCode": "350400_2006",
          "waterStage": -1.0,
          "waterFlow": 145.8,
          "conductivity": 15.9333,
          "pellucidity": -1.0,
          "ca": -1.0,
          "cu": 0.00117,
          "salinity": -1.0,
          "nitrate": -1.0,
          "nitrite": -1.0,
          "sulphate": -1.0,
          "chloride": -1.0,
          "fe": -1.0,
          "mn": -1.0,
          "silicate": -1.0,
          "exceedStandard": ""
        },
        {
          "sectionName": "永安洪田",
          "countyName": "三明市",
          "rlName": "文川溪",
          "sectionAttr": "国控",
          "dataTimeJoin": "2018-01-2019-01",
          "waterGrade": 'V',
          "exceedFlag": "超标",
          "exceedDetail": "总氮(0.55)",
          "waterTemp": 22.175,
          "ph": 7.0075,
          "doxygen": 6.34,
          "pindex": 2.116,
          "cod": 10.79166,
          "bod5": 0.9194,
          "anitrogen": 0.425,
          "tp": 0.05361083,
          "tn": 1.6686,
          "zn": 0.02083,
          "fluoride": 0.3027775,
          "se": 2.0,
          "arsenic": 2.16,
          "hg": 1.875,
          "cd": 5.0,
          "hc": 0.002,
          "cu": 0.02,
          "pb": 9.199,
          "cyanide": 0.002,
          "vp": 1.9166,
          "petroleum": 0.016805,
          "anis": 0.0208,
          "sulfide": 0.002,
          "fc": -1.0,
          "id": 26,
          "sectionCode": "350400_2006",
          "waterStage": -1.0,
          "waterFlow": 145.8,
          "conductivity": 15.9333,
          "pellucidity": -1.0,
          "ca": -1.0,
          "cu": 0.00117,
          "salinity": -1.0,
          "nitrate": -1.0,
          "nitrite": -1.0,
          "sulphate": -1.0,
          "chloride": -1.0,
          "fe": -1.0,
          "mn": -1.0,
          "silicate": -1.0,
          "exceedStandard": ""
        },
        {
          "sectionName": "永安洪田",
          "countyName": "三明市",
          "rlName": "文川溪",
          "sectionAttr": "国控",
          "dataTimeJoin": "2018-01-2019-01",
          "waterGrade": 'V',
          "exceedFlag": "超标",
          "exceedDetail": "总氮(0.55)",
          "waterTemp": 22.175,
          "ph": 7.0075,
          "doxygen": 6.34,
          "pindex": 2.116,
          "cod": 10.79166,
          "bod5": 0.9194,
          "anitrogen": 0.425,
          "tp": 0.05361083,
          "tn": 1.6686,
          "zn": 0.02083,
          "fluoride": 0.3027775,
          "se": 2.0,
          "arsenic": 2.16,
          "hg": 1.875,
          "cd": 5.0,
          "hc": 0.002,
          "cu": 0.02,
          "pb": 9.199,
          "cyanide": 0.002,
          "vp": 1.9166,
          "petroleum": 0.016805,
          "anis": 0.0208,
          "sulfide": 0.002,
          "fc": -1.0,
          "id": 26,
          "sectionCode": "350400_2006",
          "waterStage": -1.0,
          "waterFlow": 145.8,
          "conductivity": 15.9333,
          "pellucidity": -1.0,
          "ca": -1.0,
          "cu": 0.00117,
          "salinity": -1.0,
          "nitrate": -1.0,
          "nitrite": -1.0,
          "sulphate": -1.0,
          "chloride": -1.0,
          "fe": -1.0,
          "mn": -1.0,
          "silicate": -1.0,
          "exceedStandard": ""
        },
        {
          "sectionName": "永安洪田",
          "countyName": "三明市",
          "rlName": "文川溪",
          "sectionAttr": "国控",
          "dataTimeJoin": "2018-01-2019-01",
          "waterGrade": 'V',
          "exceedFlag": "超标",
          "exceedDetail": "总氮(0.55)",
          "waterTemp": 22.175,
          "ph": 7.0075,
          "doxygen": 6.34,
          "pindex": 2.116,
          "cod": 10.79166,
          "bod5": 0.9194,
          "anitrogen": 0.425,
          "tp": 0.05361083,
          "tn": 1.6686,
          "zn": 0.02083,
          "fluoride": 0.3027775,
          "se": 2.0,
          "arsenic": 2.16,
          "hg": 1.875,
          "cd": 5.0,
          "hc": 0.002,
          "cu": 0.02,
          "pb": 9.199,
          "cyanide": 0.002,
          "vp": 1.9166,
          "petroleum": 0.016805,
          "anis": 0.0208,
          "sulfide": 0.002,
          "fc": -1.0,
          "id": 26,
          "sectionCode": "350400_2006",
          "waterStage": -1.0,
          "waterFlow": 145.8,
          "conductivity": 15.9333,
          "pellucidity": -1.0,
          "ca": -1.0,
          "cu": 0.00117,
          "salinity": -1.0,
          "nitrate": -1.0,
          "nitrite": -1.0,
          "sulphate": -1.0,
          "chloride": -1.0,
          "fe": -1.0,
          "mn": -1.0,
          "silicate": -1.0,
          "exceedStandard": ""
        },
        {
          "sectionName": "永安洪田",
          "countyName": "三明市",
          "rlName": "文川溪",
          "sectionAttr": "国控",
          "dataTimeJoin": "2018-01-2019-01",
          "waterGrade": 'V',
          "exceedFlag": "超标",
          "exceedDetail": "总氮(0.55)",
          "waterTemp": 22.175,
          "ph": 7.0075,
          "doxygen": 6.34,
          "pindex": 2.116,
          "cod": 10.79166,
          "bod5": 0.9194,
          "anitrogen": 0.425,
          "tp": 0.05361083,
          "tn": 1.6686,
          "zn": 0.02083,
          "fluoride": 0.3027775,
          "se": 2.0,
          "arsenic": 2.16,
          "hg": 1.875,
          "cd": 5.0,
          "hc": 0.002,
          "cu": 0.02,
          "pb": 9.199,
          "cyanide": 0.002,
          "vp": 1.9166,
          "petroleum": 0.016805,
          "anis": 0.0208,
          "sulfide": 0.002,
          "fc": -1.0,
          "id": 26,
          "sectionCode": "350400_2006",
          "waterStage": -1.0,
          "waterFlow": 145.8,
          "conductivity": 15.9333,
          "pellucidity": -1.0,
          "ca": -1.0,
          "cu": 0.00117,
          "salinity": -1.0,
          "nitrate": -1.0,
          "nitrite": -1.0,
          "sulphate": -1.0,
          "chloride": -1.0,
          "fe": -1.0,
          "mn": -1.0,
          "silicate": -1.0,
          "exceedStandard": ""
        },
        {
          "sectionName": "永安洪田",
          "countyName": "三明市",
          "rlName": "文川溪",
          "sectionAttr": "国控",
          "dataTimeJoin": "2018-01-2019-01",
          "waterGrade": 'V',
          "exceedFlag": "超标",
          "exceedDetail": "总氮(0.55)",
          "waterTemp": 22.175,
          "ph": 7.0075,
          "doxygen": 6.34,
          "pindex": 2.116,
          "cod": 10.79166,
          "bod5": 0.9194,
          "anitrogen": 0.425,
          "tp": 0.05361083,
          "tn": 1.6686,
          "zn": 0.02083,
          "fluoride": 0.3027775,
          "se": 2.0,
          "arsenic": 2.16,
          "hg": 1.875,
          "cd": 5.0,
          "hc": 0.002,
          "cu": 0.02,
          "pb": 9.199,
          "cyanide": 0.002,
          "vp": 1.9166,
          "petroleum": 0.016805,
          "anis": 0.0208,
          "sulfide": 0.002,
          "fc": -1.0,
          "id": 26,
          "sectionCode": "350400_2006",
          "waterStage": -1.0,
          "waterFlow": 145.8,
          "conductivity": 15.9333,
          "pellucidity": -1.0,
          "ca": -1.0,
          "cu": 0.00117,
          "salinity": -1.0,
          "nitrate": -1.0,
          "nitrite": -1.0,
          "sulphate": -1.0,
          "chloride": -1.0,
          "fe": -1.0,
          "mn": -1.0,
          "silicate": -1.0,
          "exceedStandard": ""
        },
        {
          "sectionName": "永安洪田",
          "countyName": "三明市",
          "rlName": "文川溪",
          "sectionAttr": "国控",
          "dataTimeJoin": "2018-01-2019-01",
          "waterGrade": 'V',
          "exceedFlag": "超标",
          "exceedDetail": "总氮(0.55)",
          "waterTemp": 22.175,
          "ph": 7.0075,
          "doxygen": 6.34,
          "pindex": 2.116,
          "cod": 10.79166,
          "bod5": 0.9194,
          "anitrogen": 0.425,
          "tp": 0.05361083,
          "tn": 1.6686,
          "zn": 0.02083,
          "fluoride": 0.3027775,
          "se": 2.0,
          "arsenic": 2.16,
          "hg": 1.875,
          "cd": 5.0,
          "hc": 0.002,
          "cu": 0.02,
          "pb": 9.199,
          "cyanide": 0.002,
          "vp": 1.9166,
          "petroleum": 0.016805,
          "anis": 0.0208,
          "sulfide": 0.002,
          "fc": -1.0,
          "id": 26,
          "sectionCode": "350400_2006",
          "waterStage": -1.0,
          "waterFlow": 145.8,
          "conductivity": 15.9333,
          "pellucidity": -1.0,
          "ca": -1.0,
          "cu": 0.00117,
          "salinity": -1.0,
          "nitrate": -1.0,
          "nitrite": -1.0,
          "sulphate": -1.0,
          "chloride": -1.0,
          "fe": -1.0,
          "mn": -1.0,
          "silicate": -1.0,
          "exceedStandard": ""
        },
        {
          "sectionName": "永安洪田",
          "countyName": "三明市",
          "rlName": "文川溪",
          "sectionAttr": "国控",
          "dataTimeJoin": "2018-01-2019-01",
          "waterGrade": 'V',
          "exceedFlag": "超标",
          "exceedDetail": "总氮(0.55)",
          "waterTemp": 22.175,
          "ph": 7.0075,
          "doxygen": 6.34,
          "pindex": 2.116,
          "cod": 10.79166,
          "bod5": 0.9194,
          "anitrogen": 0.425,
          "tp": 0.05361083,
          "tn": 1.6686,
          "zn": 0.02083,
          "fluoride": 0.3027775,
          "se": 2.0,
          "arsenic": 2.16,
          "hg": 1.875,
          "cd": 5.0,
          "hc": 0.002,
          "cu": 0.02,
          "pb": 9.199,
          "cyanide": 0.002,
          "vp": 1.9166,
          "petroleum": 0.016805,
          "anis": 0.0208,
          "sulfide": 0.002,
          "fc": -1.0,
          "id": 26,
          "sectionCode": "350400_2006",
          "waterStage": -1.0,
          "waterFlow": 145.8,
          "conductivity": 15.9333,
          "pellucidity": -1.0,
          "ca": -1.0,
          "cu": 0.00117,
          "salinity": -1.0,
          "nitrate": -1.0,
          "nitrite": -1.0,
          "sulphate": -1.0,
          "chloride": -1.0,
          "fe": -1.0,
          "mn": -1.0,
          "silicate": -1.0,
          "exceedStandard": ""
        },
        {
          "sectionName": "永安洪田",
          "countyName": "三明市",
          "rlName": "文川溪",
          "sectionAttr": "国控",
          "dataTimeJoin": "2018-01-2019-01",
          "waterGrade": 'V',
          "exceedFlag": "超标",
          "exceedDetail": "总氮(0.55)",
          "waterTemp": 22.175,
          "ph": 7.0075,
          "doxygen": 6.34,
          "pindex": 2.116,
          "cod": 10.79166,
          "bod5": 0.9194,
          "anitrogen": 0.425,
          "tp": 0.05361083,
          "tn": 1.6686,
          "zn": 0.02083,
          "fluoride": 0.3027775,
          "se": 2.0,
          "arsenic": 2.16,
          "hg": 1.875,
          "cd": 5.0,
          "hc": 0.002,
          "cu": 0.02,
          "pb": 9.199,
          "cyanide": 0.002,
          "vp": 1.9166,
          "petroleum": 0.016805,
          "anis": 0.0208,
          "sulfide": 0.002,
          "fc": -1.0,
          "id": 26,
          "sectionCode": "350400_2006",
          "waterStage": -1.0,
          "waterFlow": 145.8,
          "conductivity": 15.9333,
          "pellucidity": -1.0,
          "ca": -1.0,
          "cu": 0.00117,
          "salinity": -1.0,
          "nitrate": -1.0,
          "nitrite": -1.0,
          "sulphate": -1.0,
          "chloride": -1.0,
          "fe": -1.0,
          "mn": -1.0,
          "silicate": -1.0,
          "exceedStandard": ""
        },
        {
          "sectionName": "永安洪田",
          "countyName": "三明市",
          "rlName": "文川溪",
          "sectionAttr": "国控",
          "dataTimeJoin": "2018-01-2019-01",
          "waterGrade": 'V',
          "exceedFlag": "超标",
          "exceedDetail": "总氮(0.55)",
          "waterTemp": 22.175,
          "ph": 7.0075,
          "doxygen": 6.34,
          "pindex": 2.116,
          "cod": 10.79166,
          "bod5": 0.9194,
          "anitrogen": 0.425,
          "tp": 0.05361083,
          "tn": 1.6686,
          "zn": 0.02083,
          "fluoride": 0.3027775,
          "se": 2.0,
          "arsenic": 2.16,
          "hg": 1.875,
          "cd": 5.0,
          "hc": 0.002,
          "cu": 0.02,
          "pb": 9.199,
          "cyanide": 0.002,
          "vp": 1.9166,
          "petroleum": 0.016805,
          "anis": 0.0208,
          "sulfide": 0.002,
          "fc": -1.0,
          "id": 26,
          "sectionCode": "350400_2006",
          "waterStage": -1.0,
          "waterFlow": 145.8,
          "conductivity": 15.9333,
          "pellucidity": -1.0,
          "ca": -1.0,
          "cu": 0.00117,
          "salinity": -1.0,
          "nitrate": -1.0,
          "nitrite": -1.0,
          "sulphate": -1.0,
          "chloride": -1.0,
          "fe": -1.0,
          "mn": -1.0,
          "silicate": -1.0,
          "exceedStandard": ""
        },
      ]
    };
  },
  methods: {
    updateTable(e) {
      this.page.pageNum = e;
      this.refresh();
    },
    refresh(enterName) {
      return new Promise((resolve, reject) => {
        this.loading = true;
        const paramObj = {};
        // 请求数据
        initTableData(this.url, paramObj)
          .then(res => {
            this.page.total = res.data.total;
            this.$emit("updateTotal", this.page.total);
            this.tableData = res.data.list;
            // time 毫秒后显示表格
            setTimeout(() => {
              this.loading = false;
            }, 500);
            resolve(res);
          })
          .catch(err => {
            this.loading = false;
            reject(err);
          });
      });
    },
    fitTable() {
      this.$nextTick(() => {
        this.tableHeight = window.innerHeight - 180;
      });
    }
  }
};
</script>

<style lang="scss">
.excel-down-btn {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  height: 40px;
}
.table-time {
  margin-left: 10px;
  margin-right: auto;
  font-size: 14px;
  font-weight: bold;
}
</style>